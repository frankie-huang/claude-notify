# Change: 增强 /new 指令目录选择卡片，支持自定义路径输入和动态路径浏览

## Why

当前 `/new` 指令的目录选择卡片仅支持从历史常用目录中选择（`select_static` 下拉菜单），用户无法指定未使用过的新目录路径。这限制了用户在以下场景的灵活性：

1. **首次使用**：没有历史记录时，下拉菜单为空，用户无法通过卡片选择任何目录
2. **新项目**：用户想在一个从未使用过的新目录中启动会话
3. **临时目录**：用户需要在非常用目录中临时工作

## What Changes

- **新增自定义路径输入框**：在目录选择卡片中增加 `input` 文本输入组件，用户可以手动输入完整路径
- **双选模式**：用户既可以从下拉菜单选择历史目录（快速），也可以在输入框手动输入路径（灵活）
- **新增路径浏览接口**：Callback 后端提供 `/claude/browse-dirs` 接口，支持列出指定路径下的子目录
- **新增路径浏览卡片交互**：用户点击"浏览目录"按钮后，系统列出当前路径的子目录供选择，实现逐级导航

## Design Rationale

飞书 Card 2.0 的 `select_static` 不支持动态加载选项（无 on_search 回调），因此无法实现"输入时自动补全"。替代方案是：

1. **input 输入框**：让用户直接输入完整路径（简单场景）
2. **路径浏览按钮**：通过按钮回调触发服务端列出子目录，再更新卡片展示目录列表（需要导航的场景）

这种方案利用了飞书卡片的回调更新机制：用户点击按钮 → 服务端返回新卡片内容 → 飞书自动替换原卡片。

## Impact

- Affected specs: `feishu-command`（扩展卡片UI和后端接口）, `card-callback`（新增浏览回调处理）
- Affected code:
  - `src/server/handlers/feishu.py` - 修改卡片构建逻辑，新增 input 和浏览按钮
  - `src/server/handlers/callback.py` - 新增 `/claude/browse-dirs` 接口
  - `src/server/handlers/feishu.py` - 新增浏览回调处理逻辑
